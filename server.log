nohup: les entr√©es sont ignor√©es

> better-api@1.0.0 dev
> prisma generate && ts-node-dev --respawn --transpile-only src/index.ts

warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
For more information, see: https://pris.ly/prisma-config

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

‚úî Generated Prisma Client (v6.16.2) to ./node_modules/@prisma/client in 145ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Interested in query caching in just a few lines of code? Try Accelerate today! https://pris.ly/tip-3-accelerate

[INFO] 17:27:40 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.9.3)
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T17:27:42.094Z] [INFO] Initializing Cron Service...
[2025-12-19T17:27:42.107Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 9 {"service":"user-service"}
info: üéâ Server is running on port 5000 {"service":"user-service"}
info: üîí Trust proxy: 1 {"service":"user-service"}
info: üåê CORS Origin: * {"service":"user-service"}
info: üõ°Ô∏è  Security: ENABLED (Helmet + Custom Headers) {"service":"user-service"}
info: üì° WebSocket available at: ws://localhost:5000/ws {"service":"user-service"}
info: üì° Ready to accept connections! {"service":"user-service"}
info: ============================================================ {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üìß [EMAIL VERIFICATION] D√©but pour test-multi-1766165275566@example.com (cmjd57ck20000qahxkdhx9bq0) {"service":"user-service"}
info: ‚úÖ [EMAIL VERIFICATION] Utilisateur trouv√©: test-multi-1766165275566@example.com {"service":"user-service"}
info: üîê [CREATE VERIFICATION] D√©but pour test-multi-1766165275566@example.com {"service":"user-service"}
info: üìù [CREATE VERIFICATION] Code g√©n√©r√© pour test-multi-1766165275566@example.com {"service":"user-service"}
info: ‚úÖ [CREATE VERIFICATION] OTP cr√©√©: cmjd57clh0004qahxov1ee9fo {"service":"user-service"}
info: üìß [EMAIL OTP] Pour test-multi-1766165275566@example.com: 917255 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: test-multi-1766165275566@example.com, Sujet: "V√©rification de votre adresse email - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† test-multi-1766165275566@example.com {"service":"user-service"}
info: ‚úÖ [CREATE VERIFICATION] Termin√© pour test-multi-1766165275566@example.com {"service":"user-service"}
info: ‚úÖ [EMAIL VERIFICATION] Email envoy√© avec succ√®s √† test-multi-1766165275566@example.com {"service":"user-service"}
üîç Device Info: { ip: '127.0.0.1', userAgent: 'axios/1.13.2', deviceType: 'UNKNOWN' }
info: ‚úÖ Inscription r√©ussie: test-multi-1766165275566@example.com (cmjd57ck20000qahxkdhx9bq0) {"ip":"127.0.0.1","service":"user-service","userId":"cmjd57ck20000qahxkdhx9bq0"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: test-multi-1766165275566@example.com (cmjd57ck20000qahxkdhx9bq0) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjd57ck20000qahxkdhx9bq0"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí Nouvel appareil d√©tect√© pour test-multi-1766165275566@example.com, v√©rification requise {"service":"user-service"}
[2025-12-19T17:27:58.303Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjd57ck20000qahxkdhx9bq0, deviceId: bada56db5156251e
[2025-12-19T17:27:58.307Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd57ejk000cqahx92fkf9ca, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour test-multi-1766165275566@example.com: 715311 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: test-multi-1766165275566@example.com, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: ‚úÖ Email envoy√© √† test-multi-1766165275566@example.com {"service":"user-service"}
[2025-12-19T17:28:00.209Z] [INFO] üîç V√©rification OTP pour session: cmjd57ejk000cqahx92fkf9ca
[2025-12-19T17:28:00.218Z] [INFO] ‚úÖ Session activ√©e: cmjd57ejk000cqahx92fkf9ca
[2025-12-19T17:28:00.218Z] [INFO] üîí R√©vocation des autres sessions pour userId: cmjd57ck20000qahxkdhx9bq0
[2025-12-19T17:28:00.221Z] [INFO] ‚úÖ 1 session(s) r√©voqu√©e(s)
[2025-12-19T17:28:00.222Z] [ERROR] ‚ùå Erreur notification WebSocket: this.webSocketService.sendToUser is not a function
[2025-12-19T17:28:00.225Z] [ERROR] ‚ùå Erreur envoi email: this.emailService.sendDeviceConnectionConfirmation is not a function
[INFO] 17:28:57 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/middlewares/rateLimitMiddleware.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T17:28:59.541Z] [INFO] Initializing Cron Service...
[2025-12-19T17:28:59.561Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
[INFO] 17:29:13 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/middlewares/rateLimitMiddleware.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T17:29:15.034Z] [INFO] Initializing Cron Service...
[2025-12-19T17:29:15.056Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
[INFO] 18:46:00 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AuthController.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:46:02.020Z] [INFO] Initializing Cron Service...
[2025-12-19T18:46:02.059Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
info: üéâ Server is running on port 5000 {"service":"user-service"}
info: üîí Trust proxy: 1 {"service":"user-service"}
info: üåê CORS Origin: * {"service":"user-service"}
info: üõ°Ô∏è  Security: ENABLED (Helmet + Custom Headers) {"service":"user-service"}
info: üì° WebSocket available at: ws://localhost:5000/ws {"service":"user-service"}
info: üì° Ready to accept connections! {"service":"user-service"}
info: ============================================================ {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lam[INFO] 18:53:08 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/services/AuthService.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:53:11.292Z] [INFO] Initializing Cron Service...
[2025-12-19T18:53:11.333Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
 SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc[INFO] 18:53:08 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/services/AuthService.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:53:11.283Z] [INFO] Initializing Cron Service...
[2025-12-19T18:53:11.306Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
emand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: superadmin@uadb.edu.sn (cmjc3fffy0000qavzj8240h1u) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjc3fffy0000qavzj8240h1u"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
warn: ‚ö†Ô∏è ValidationError Session ID et code OTP requis {"code":"VALIDATION_ERROR","details":[{"constraint":"required","field":"sessionId","message":"Session ID requis"},{"constraint":"required","field":"otpCode","message":"Code OTP requis"}],"ip":"::1","method":"POST","path":"/api/auth/verify-device","service":"user-service"}
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
warn: ‚ö†Ô∏è Tentative de connexion √©chou√©e: pape@gmail.com {"ip":"::1","reason":"USER_NOT_FOUND","service":"user-service"}
error: ‚ùå √âchec de connexion dans le contr√¥leur {"clientIp":"::1","email":"pape@gmail.com","errorMessage":"Identifiants invalides","errorType":"AuthenticationError","service":"user-service"}
info: üîç IP ::1 - Attempt 1/5, 4 remaining - Reset in 10s {"service":"user-service"}
warn: ‚ö†Ô∏è AuthenticationError Identifiants invalides {"code":"AUTHENTICATION_ERROR","details":{"email":"pape@gmail.com","ipAddress":"::1","reason":"USER_NOT_FOUND","timestamp":"2025-12-19T18:52:31.121Z"},"ip":"::1","method":"POST","path":"/api/auth/login","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: pape@uadb.edu.sn (cmjc3ffg30002qavz82xtc81z) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjc3ffg30002qavz82xtc81z"}
info: ‚úÖ Successful login for IP ::1 - failed attempts counter reset {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
[2025-12-19T18:52:47.889Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e upcoming:
[2025-12-19T18:52:47.890Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e:
[2025-12-19T18:52:47.897Z] [ERROR] Erreur lors de la r√©cup√©ration du combat upcoming:
[2025-12-19T18:52:47.897Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
[INFO] 18:53:08 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/services/AuthService.ts has been modified
info: Received SIGTERM, shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:53:12.080Z] [INFO] Initializing Cron Service...
[2025-12-19T18:53:12.098Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
[2025-12-19T17:48:40.755Z] [ERROR] Erreur lors de la r√©cup√©ration du combat day-events:
[2025-12-19T17:48:40.755Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."audit_logs"."id" FROM "public"."audit_logs" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."audit_logs"."id", "public"."audit_logs"."action", "public"."audit_logs"."table", "public"."audit_logs"."recordId", "public"."audit_logs"."oldData", "public"."audit_logs"."newData", "public"."audit_logs"."ipAddress", "public"."audit_logs"."userAgent", "public"."audit_logs"."createdAt", "public"."audit_logs"."userId" FROM "public"."audit_logs" WHERE 1=1 ORDER BY "public"."audit_logs"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4) OFFSET $5
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."audit_logs"."id" FROM "public"."audit_logs" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."audit_logs"."id", "public"."audit_logs"."action", "public"."audit_logs"."table", "public"."audit_logs"."recordId", "public"."audit_logs"."oldData", "public"."audit_logs"."newData", "public"."audit_logs"."ipAddress", "public"."audit_logs"."userAgent", "public"."audit_logs"."createdAt", "public"."audit_logs"."userId" FROM "public"."audit_logs" WHERE 1=1 ORDER BY "public"."audit_logs"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
[2025-12-19T17:51:07.594Z] [ERROR] Erreur lors de la r√©cup√©ration du combat day-events:
[2025-12-19T17:51:07.594Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/admin/withdrawals/pending","service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
[2025-12-19T18:17:42.266Z] [ERROR] Erreur lors de la r√©cup√©ration du combat upcoming:
[2025-12-19T18:17:42.267Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
[2025-12-19T18:17:42.269Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e upcoming:
[2025-12-19T18:17:42.269Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e:
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."phone", "public"."users"."email", "public"."users"."password", "public"."users"."role"::text, "public"."users"."isEmailVerified", "public"."users"."isActive", "public"."users"."isBanned", "public"."users"."banReason", "public"."users"."bannedAt", "public"."users"."createdAt", "public"."users"."lastLogin", "public"."users"."updatedAt", "public"."users"."avatar", "public"."users"."kycStatus"::text, "public"."users"."kycDocuments", "public"."users"."kycVerifiedAt", "public"."users"."dailyBetLimit", "public"."users"."maxBetPerFight" FROM "public"."users" WHERE 1=1 ORDER BY "public"."users"."createdAt" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."wallets"."id", "public"."wallets"."userId", "public"."wallets"."balance", "public"."wallets"."lockedBalance", "public"."wallets"."bonusBalance", "public"."wallets"."totalDeposited", "public"."wallets"."totalWithdrawn", "public"."wallets"."totalWon", "public"."wallets"."totalLost", "public"."wallets"."createdAt", "public"."wallets"."updatedAt" FROM "public"."wallets" WHERE "public"."wallets"."userId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) OFFSET $11
error: ‚ùå Unhandled error Service with "MaybeConstructable<FightService>" identifier was not found in the container. Register it before usage via explicitly calling the "Container.set" function or using the "@Service()" decorator. {"ip":"::1","method":"PATCH","name":"ServiceNotFoundError","path":"/api/admin/fights/cmjc3ffh2000vqavzp365chaw/status","service":"user-service","stack":"ServiceNotFoundError: Service with \"MaybeConstructable<FightService>\" identifier was not found in the container. Register it before usage via explicitly calling the \"Container.set\" function or using the \"@Service()\" decorator.\n    at ContainerInstance.get (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/src/container-instance.class.ts:75:11)\n    at Function.get (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/src/container.class.ts:61:32)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AdminController.ts:66:44\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AdminController.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AdminController.ts:4:12)\n    at updateFightStatus (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AdminController.ts:74:16)\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
warn: ‚ö†Ô∏è ForbiddenError Acc√®s non autoris√© {"code":"FORBIDDEN","details":{"reason":"INSUFFICIENT_PERMISSIONS","requiredRoles":["ADMIN"],"suggestion":"R√¥les requis: ADMIN. Votre r√¥le: SUPER_ADMIN","userRole":"SUPER_ADMIN"},"ip":"::1","method":"POST","path":"/api/fight/cmjc3ffh90011qavzm30owi1a/request-validation-otp","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
warn: ‚ö†Ô∏è ValidationError Session ID est requis {"code":"VALIDATION_ERROR","details":[{"constraint":"required","field":"sessionId","message":"Session ID est requis"}],"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: superadmin@uadb.edu.sn (cmjc3fffy0000qavzj8240h1u) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjc3fffy0000qavzj8240h1u"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
[2025-12-19T18:24:37.650Z] [ERROR] Erreur lors de la r√©cup√©ration du combat upcoming:
[2025-12-19T18:24:37.650Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
[2025-12-19T18:24:37.651Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e upcoming:
[2025-12-19T18:24:37.651Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e:
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
warn: ‚ö†Ô∏è ValidationError Session ID est requis {"code":"VALIDATION_ERROR","details":[{"constraint":"required","field":"sessionId","message":"Session ID est requis"}],"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: superadmin@uadb.edu.sn (cmjc3fffy0000qavzj8240h1u) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjc3fffy0000qavzj8240h1u"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
[2025-12-19T18:26:42.543Z] [ERROR] Erreur lors de la r√©cup√©ration du combat upcoming:
[2025-12-19T18:26:42.544Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
[2025-12-19T18:26:42.544Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e upcoming:
[2025-12-19T18:26:42.544Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e:
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí Nouvel appareil d√©tect√© pour superadmin@uadb.edu.sn, v√©rification requise {"service":"user-service"}
[2025-12-19T18:29:22.809Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 8df368fc639f84d5
[2025-12-19T18:29:22.814Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd7ediy0009qa72parhsgzb, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 108671 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí Nouvel appareil d√©tect√© pour superadmin@uadb.edu.sn, v√©rification requise {"service":"user-service"}
[2025-12-19T18:30:28.381Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 8df368fc639f84d5
[2025-12-19T18:30:28.384Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd7fs4d000dqa72194pxcbw, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 589823 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
warn: ‚ö†Ô∏è ValidationError Session ID est requis {"code":"VALIDATION_ERROR","details":[{"constraint":"required","field":"sessionId","message":"Session ID est requis"}],"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
[2025-12-19T18:37:00.367Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e upcoming:
[2025-12-19T18:37:00.367Z] [ERROR] Erreur lors de la r√©cup√©ration de la journ√©e:
[2025-12-19T18:37:00.368Z] [ERROR] Erreur lors de la r√©cup√©ration du combat upcoming:
[2025-12-19T18:37:00.368Z] [ERROR] Erreur lors de la r√©cup√©ration du combat:
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: ‚úÖ Connexion r√©ussie: superadmin@uadb.edu.sn (cmjc3fffy0000qavzj8240h1u) {"deviceType":"DESKTOP","ip":"::1","service":"user-service","userId":"cmjc3fffy0000qavzj8240h1u"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."lastLogin" >= $1 OFFSET $2) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."bets"."amount" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT SUM("amount") AS "_sum$amount" FROM (SELECT "public"."transactions"."amount" FROM "public"."transactions" WHERE ("public"."transactions"."type" = CAST($1::text AS "public"."TransactionType") AND "public"."transactions"."status" = CAST($2::text AS "public"."TransactionStatus") AND "public"."transactions"."createdAt" >= $3) OFFSET $4) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."fights"."id" FROM "public"."fights" WHERE ("public"."fights"."status" = CAST($1::text AS "public"."FightStatus") AND "public"."fights"."scheduledAt" > $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."withdrawal_requests"."id" FROM "public"."withdrawal_requests" WHERE "public"."withdrawal_requests"."status" = CAST($1::text AS "public"."WithdrawalStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."bets"."id" FROM "public"."bets" WHERE "public"."bets"."status" = CAST($1::text AS "public"."BetStatus") OFFSET $2) AS "sub"
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
[INFO] 18:46:00 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/AuthController.ts has been modified
info: Received SIGTERM, shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:46:02.801Z] [INFO] Initializing Cron Service...
[2025-12-19T18:46:02.814Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
error: ‚ùå Port 5000 is already in use {"service":"user-service"}
info: Shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
[INFO] 18:53:08 Restarting: /home/diop/T√©l√©chargements/lutte/lamb/src/services/AuthService.ts has been modified
info: Socket.io server initialized on path /ws {"service":"user-service"}
info: ‚úÖ WebSocket service initialized {"service":"user-service"}
[2025-12-19T18:53:11.200Z] [INFO] Initializing Cron Service...
[2025-12-19T18:53:11.241Z] [INFO] Cron Service initialized
info: üöÄ Starting Better API Server... {"service":"user-service"}
info: üìÅ Environment: development {"service":"user-service"}
info: üîß Configuration loaded: PORT=5000, CORS=* {"service":"user-service"}
info: üîå Attempting to connect to the database... {"service":"user-service"}
prisma:info Starting a postgresql pool with 21 connections.
info: ‚úÖ Successfully connected to the database {"service":"user-service"}
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
info: üìä Database connection test successful. User count: 10 {"service":"user-service"}
info: üéâ Server is running on port 5000 {"service":"user-service"}
info: üîí Trust proxy: 1 {"service":"user-service"}
info: üåê CORS Origin: * {"service":"user-service"}
info: üõ°Ô∏è  Security: ENABLED (Helmet + Custom Headers) {"service":"user-service"}
info: üì° WebSocket available at: ws://localhost:5000/ws {"service":"user-service"}
info: üì° Ready to accept connections! {"service":"user-service"}
info: ============================================================ {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3ffg30002qavz82xtc81z {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: pape@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí V√©rification requise pour superadmin@uadb.edu.sn (Admin: true, NewDevice: false) {"service":"user-service"}
[2025-12-19T18:54:49.391Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 1449e5e80edd2dbc
[2025-12-19T18:54:49.396Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd8b3g00001qa0p2kyb3m9w, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 826779 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ SMTP connection verified successfully {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è ValidationError Session ID est requis {"code":"VALIDATION_ERROR","details":[{"constraint":"required","field":"sessionId","message":"Session ID est requis"}],"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí V√©rification requise pour superadmin@uadb.edu.sn (Admin: true, NewDevice: false) {"service":"user-service"}
[2025-12-19T18:55:09.017Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 1449e5e80edd2dbc
[2025-12-19T18:55:09.021Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd8bil60005qa0phf7aqb6q, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 460882 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è AuthenticationError Token d'authentification manquant {"code":"AUTHENTICATION_ERROR","details":{"reason":"NO_AUTH_TOKEN","suggestion":"Ajoutez un header Authorization: Bearer <token>"},"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí V√©rification requise pour superadmin@uadb.edu.sn (Admin: true, NewDevice: false) {"service":"user-service"}
[2025-12-19T18:55:42.606Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 1449e5e80edd2dbc
[2025-12-19T18:55:42.609Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd8c8i60009qa0pbbyra0cl, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 344441 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è AuthenticationError Token d'authentification manquant {"code":"AUTHENTICATION_ERROR","details":{"reason":"NO_AUTH_TOKEN","suggestion":"Ajoutez un header Authorization: Bearer <token>"},"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí V√©rification requise pour superadmin@uadb.edu.sn (Admin: true, NewDevice: false) {"service":"user-service"}
[2025-12-19T18:59:36.893Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 1449e5e80edd2dbc
[2025-12-19T18:59:36.898Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd8h9a5000dqa0pqk47p12r, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 483052 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
warn: ‚ö†Ô∏è AuthenticationError Token d'authentification manquant {"code":"AUTHENTICATION_ERROR","details":{"reason":"NO_AUTH_TOKEN","suggestion":"Ajoutez un header Authorization: Bearer <token>"},"ip":"::1","method":"POST","path":"/api/auth/logout","service":"user-service"}
error: Failed to create audit log: this.auditService.createAuditLog is not a function {"service":"user-service"}
info: üîí V√©rification requise pour superadmin@uadb.edu.sn (Admin: true, NewDevice: false) {"service":"user-service"}
[2025-12-19T18:59:57.476Z] [INFO] üì± Cr√©ation session en attente pour userId: cmjc3fffy0000qavzj8240h1u, deviceId: 1449e5e80edd2dbc
[2025-12-19T18:59:57.480Z] [INFO] ‚úÖ Session en attente cr√©√©e: cmjd8hp5w000hqa0ppbgjucqq, OTP g√©n√©r√©
info: üìß [EMAIL OTP] Pour superadmin@uadb.edu.sn: 750347 {"service":"user-service"}
info: üìß [DEV EMAIL] Destinataire: superadmin@uadb.edu.sn, Sujet: "üîí Code de v√©rification nouvel appareil - Xbeur" {"service":"user-service"}
info: ‚úÖ Email envoy√© √† superadmin@uadb.edu.sn {"service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
[2025-12-19T19:01:03.304Z] [INFO] üîç V√©rification OTP pour session: cmjd8hp5w000hqa0ppbgjucqq
[2025-12-19T19:01:03.312Z] [INFO] ‚úÖ Session activ√©e: cmjd8hp5w000hqa0ppbgjucqq
[2025-12-19T19:01:03.313Z] [INFO] üîí R√©vocation des autres sessions pour userId: cmjc3fffy0000qavzj8240h1u
[2025-12-19T19:01:03.315Z] [INFO] ‚úÖ 1 session(s) r√©voqu√©e(s)
[2025-12-19T19:01:03.315Z] [ERROR] ‚ùå Erreur notification WebSocket: this.webSocketService.sendToUser is not a function
[2025-12-19T19:01:03.319Z] [ERROR] ‚ùå Erreur envoi email: this.emailService.sendDeviceConnectionConfirmation is not a function
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
info: üë§ R√©cup√©ration profil demand√©e pour: cmjc3fffy0000qavzj8240h1u {"service":"user-service"}
info: ‚úÖ Profil r√©cup√©r√© pour: superadmin@uadb.edu.sn {"service":"user-service"}
error: ‚ùå Unhandled error this.notificationService.getNotifications is not a function {"ip":"::1","method":"GET","name":"TypeError","path":"/api/notifications/","service":"user-service","stack":"TypeError: this.notificationService.getNotifications is not a function\n    at _classThis.<anonymous> (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:20:66)\n    at Generator.next (<anonymous>)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:42:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:38:12)\n    at _classThis.getNotifications (/home/diop/T√©l√©chargements/lutte/lamb/src/controllers/NotificationController.ts:66:20)\n    at /home/diop/T√©l√©chargements/lutte/lamb/src/routes/notificationRoutes.ts:19:48\n    at Layer.handleRequest (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/layer.js:152:17)\n    at next (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/diop/T√©l√©chargements/lutte/lamb/node_modules/router/lib/route.js:117:3)"}
warn: ‚ö†Ô∏è Route non trouv√©e {"ip":"::1","method":"GET","path":"/api/notifications/unread-count","service":"user-service"}
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."bets"."id", "public"."bets"."amount", "public"."bets"."chosenFighter"::text, "public"."bets"."status"::text, "public"."bets"."potentialWin", "public"."bets"."actualWin", "public"."bets"."odds", "public"."bets"."ipAddress", "public"."bets"."userAgent", "public"."bets"."createdAt", "public"."bets"."acceptedAt", "public"."bets"."settledAt", "public"."bets"."cancelledAt", "public"."bets"."cancelReason", "public"."bets"."creatorId", "public"."bets"."acceptorId", "public"."bets"."fightId", "public"."bets"."taggedUserId", "public"."bets"."canCancelUntil" FROM "public"."bets" LEFT JOIN "public"."fights" AS "j0" ON ("j0"."id") = ("public"."bets"."fightId") WHERE ("public"."bets"."status" = CAST($1::text AS "public"."BetStatus") AND ("j0"."scheduledAt" <= $2 AND ("j0"."id" IS NOT NULL))) ORDER BY "public"."bets"."id" ASC LIMIT $3 OFFSET $4
prisma:error Error in PostgreSQL connection: Error { kind: Db, cause: Some(DbError { severity: "FATAL", parsed_severity: Some(Fatal), code: SqlState(E57P01), message: "terminating connection due to administrator command", detail: None, hint: None, position: None, where_: None, schema: None, table: None, column: None, datatype: None, constraint: None, file: Some("postgres.c"), line: Some(3222), routine: Some("ProcessInterrupts") }) }
info: Received SIGTERM, shutting down gracefully... {"service":"user-service"}
info: WebSocket service destroyed {"service":"user-service"}
info: WebSocket service stopped {"service":"user-service"}
info: Database connection closed {"service":"user-service"}
